<% if flash[:notice] %>
  <div class="notice"><%= flash[:notice] %></div>
<% end %>

  <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.9.1.js"></script>
  <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

  <script>
  $(function() {
    $( ".draggable" ).draggable({ revert: true, helper: "clone", cursorAt: { top: 15, left: 56 }  });

    $( ".droppable" ).droppable({
      drop: function( event, ui ) {
        $.ajax({
          url: '/transfer',
          type: 'post',
          beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},

          data: {
            player_id: $(ui.draggable).attr("id"),
            team_id: $(this).attr("id"),
          },
          success: function(responseText, statusText, xhr, $form) {
            console.log("It hits success");         
          },
          error: function(responseText, statusText, xhr) {
            console.log("It hits failure");
          }
        });
      location.reload();
      }
    });
  });
  </script> 
  


<h3>Transfer Players</h3>
<table id='mainTable'>
  <tr id='mainRow'>
    <td id='playersColumn'>
      <%= render 'players/player_table' %>
    </td>
    <td>
      <%= render 'teams/team_table' %>
    </td>
  </tr>
</table>
